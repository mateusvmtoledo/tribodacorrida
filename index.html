<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tribo da Corrida - Encontre sua prÃ³xima corrida</title>
    <meta name="description" content="O maior portal de corridas do Brasil. Encontre eventos de rua, trilha, ultramaratonas, duathlon e triathlon perto de vocÃª!" />
    <meta name="keywords" content="corrida, maratona, trilha, ultramaratona, duathlon, triathlon, eventos esportivos, Brasil" />
    <meta name="author" content="Tribo da Corrida" />

    <meta property="og:title" content="Tribo da Corrida - Encontre sua prÃ³xima corrida" />
    <meta property="og:description" content="O maior portal de corridas do Brasil. Encontre eventos de rua, trilha, ultramaratonas e muito mais!" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@TriboDaCorrida" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- 1ï¸âƒ£ CARREGA O SDK DO CATALYST (v4.5.0) -->
    <script src="https://static.zohocdn.com/catalyst/sdk/js/4.5.0/catalystWebSDK.js"></script>

    <!-- 2ï¸âƒ£ INICIALIZAÃ‡ÃƒO ROBUSTA DO CATALYST -->
    <script>
      console.log("ðŸ”§ [HTML] Script de inicializaÃ§Ã£o carregado");
      
      // Credenciais do projeto (FORMATO CORRETO para SDK 4.5.0)
      const CATALYST_CONFIG = {
        project_id: "28308000000011085",  // â† underscore, nÃ£o camelCase!
        zaid: "50037517394"
      };

      // Aguarda o DOM estar pronto
      document.addEventListener('DOMContentLoaded', function() {
        console.log("ðŸ“„ [HTML] DOM carregado");
        console.log("ðŸ” [HTML] Verificando window.catalyst:", window.catalyst);
        
        // ===== VERIFICAÃ‡ÃƒO INICIAL =====
        if (!window.catalyst) {
          console.error("âŒ [HTML] ERRO CRÃTICO: SDK do Catalyst nÃ£o carregado!");
          console.error("ðŸ’¡ [HTML] Verifique:");
          console.error("   1. Se o script estÃ¡ carregando (AdBlock pode bloquear)");
          console.error("   2. Se a URL estÃ¡ correta");
          console.error("   3. Se hÃ¡ erros de CORS");
          return;
        }
        
        console.log("âœ… [HTML] window.catalyst encontrado:", window.catalyst);
        console.log("ðŸ” [HTML] Propriedades disponÃ­veis:", Object.keys(window.catalyst));
        console.log("ðŸ” [HTML] MÃ©todos do protÃ³tipo:", Object.getOwnPropertyNames(Object.getPrototypeOf(window.catalyst)));

        // ===== ESTRATÃ‰GIA 1: SDK 4.5.0 MODERNO (initApp) =====
        try {
          console.log("ðŸš€ [HTML] TENTATIVA 1: Usando initApp() [SDK 4.5.0]");
          
          if (typeof window.catalyst.initApp === 'function') {
            const app = window.catalyst.initApp(CATALYST_CONFIG);
            
            console.log("âœ… [HTML] initApp() executado com sucesso!");
            console.log("ðŸ“¦ [HTML] App retornado:", app);
            
            // Armazena globalmente
            window.catalystApp = app;
            window.catalystReady = true;
            
            console.log("ðŸŽ‰ [HTML] SUCESSO! Catalyst pronto via initApp()");
            return; // Sucesso, sai da funÃ§Ã£o
            
          } else {
            console.warn("âš ï¸ [HTML] initApp() nÃ£o existe, tentando prÃ³xima estratÃ©gia...");
          }
          
        } catch (error) {
          console.error("âŒ [HTML] Erro ao usar initApp():", error);
          console.log("ðŸ”„ [HTML] Tentando estratÃ©gia alternativa...");
        }

        // ===== ESTRATÃ‰GIA 2: INICIALIZAÃ‡ÃƒO VIA AUTH =====
        try {
          console.log("ðŸš€ [HTML] TENTATIVA 2: Usando auth.init()");
          
          if (window.catalyst.auth && typeof window.catalyst.auth.init === 'function') {
            window.catalyst.auth.init(CATALYST_CONFIG);
            
            console.log("âœ… [HTML] auth.init() executado!");
            
            window.catalystApp = window.catalyst;
            window.catalystReady = true;
            
            console.log("ðŸŽ‰ [HTML] SUCESSO! Catalyst pronto via auth.init()");
            return;
            
          } else {
            console.warn("âš ï¸ [HTML] auth.init() nÃ£o existe, tentando prÃ³xima estratÃ©gia...");
          }
          
        } catch (error) {
          console.error("âŒ [HTML] Erro ao usar auth.init():", error);
          console.log("ðŸ”„ [HTML] Tentando estratÃ©gia alternativa...");
        }

        // ===== ESTRATÃ‰GIA 3: INICIALIZAÃ‡ÃƒO DIRETA =====
        try {
          console.log("ðŸš€ [HTML] TENTATIVA 3: Usando catalyst.init()");
          
          if (typeof window.catalyst.init === 'function') {
            window.catalyst.init(CATALYST_CONFIG);
            
            console.log("âœ… [HTML] catalyst.init() executado!");
            
            window.catalystApp = window.catalyst;
            window.catalystReady = true;
            
            console.log("ðŸŽ‰ [HTML] SUCESSO! Catalyst pronto via init()");
            return;
            
          } else {
            console.warn("âš ï¸ [HTML] catalyst.init() nÃ£o existe");
          }
          
        } catch (error) {
          console.error("âŒ [HTML] Erro ao usar catalyst.init():", error);
        }

        // ===== ESTRATÃ‰GIA 4: ASSUME QUE JÃ ESTÃ PRONTO =====
        console.warn("âš ï¸ [HTML] Nenhuma estratÃ©gia de inicializaÃ§Ã£o funcionou");
        console.log("ðŸ”„ [HTML] Assumindo que o Catalyst estÃ¡ pronto para uso direto...");
        
        window.catalystApp = window.catalyst;
        window.catalystReady = true;
        
        console.log("ðŸ’¡ [HTML] FALLBACK ATIVADO: Usando Catalyst sem inicializaÃ§Ã£o explÃ­cita");
        console.log("âš ï¸ [HTML] Algumas funcionalidades podem nÃ£o funcionar corretamente");
        console.log("ðŸ“‹ [HTML] Se houver erros, verifique:");
        console.log("   1. VersÃ£o do SDK");
        console.log("   2. Credenciais do projeto");
        console.log("   3. PermissÃµes da tabela");
      });

      // ===== LOG DE DIAGNÃ“STICO (APÃ“S 2 SEGUNDOS) =====
      setTimeout(() => {
        console.log("ðŸ“Š [HTML] ===== DIAGNÃ“STICO FINAL =====");
        console.log("   window.catalyst:", !!window.catalyst);
        console.log("   window.catalystApp:", !!window.catalystApp);
        console.log("   window.catalystReady:", window.catalystReady);
        console.log("==========================================");
      }, 2000);
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>